!function(t,n,e,r){"use strict";var i=function(){var t=Array.prototype,n=t.slice,e=Object.prototype,o=Object.keys,s=e.hasOwnProperty,a=e.toString,u=Function.prototype.bind,h=function(t){return i.isString(t)?function(n){return n[t]}:t},c=function(t){return function(n,e,r){for(var i={},o=h(e),s=0,a=n.length;a>s;++s){var u=o.call(r,n[s],s,n);t(i,n[s],u)}return i}};return{isNull:function(t){return null===t},isBoolean:function(t){return t===!0||t===!1||"[object Boolean]"===a.call(t)},bind:function(t,n){return u?t.bind(n):function(){return t.apply(n,arguments)}},toArray:function(t){return i.map(t,function(t){return t})},defaults:function(t,n){return i.forEach(i.keys(n),function(e){i.isUndefined(t[e])&&(t[e]=n[e])}),t},result:function(t,n){var e=t[n];return i.isFunction(e)?e.call(t):e},has:function(t,n){return s.call(t,n)},size:function(t){return t.length},first:function(t,e){return null==e?t[0]:n.call(t,0,e)},last:function(t,e){return null==e?t[t.length-1]:n.call(t,t.length-e,t.length)},rest:function(t,e){var r=arguments.length>1?e:1;return n.call(t,r,t.length)},initial:function(t,e){var r=t.length,i=arguments.length>1?r-e:r-1;return n.call(t,0,i)},indexOf:function(t,n){for(var e=0,r=t.length;r>e;++e)if(t[e]===n)return e;return-1},lastIndexOf:function(t,n){for(var e=t.length-1;e>=0;--e)if(t[e]===n)return e;return-1},keys:function(t){if(!i.isObject(t))return[];if(o)return o(t);var n=[];for(var e in t)i.has(t,e)&&n.push(e);return n},functions:function(t){var n=[];for(var e in t)i.isFunction(t[e])&&n.push(e);return n.sort()},map:function(t,n,e){for(var r=[],i=0,o=t.length;o>i;++i)r[i]=n.call(e,t[i],i,t);return r},every:function(t,n,e){for(var r=0,i=t.length;i>r;++r)if(!n.call(e,t[r],r,t))return!1;return!0},some:function(t,n,e){for(var r=0,i=t.length;i>r;++r)if(n.call(e,t[r],r,t))return!0;return!1},filter:function(t,n,e){for(var r=[],i=0,o=t.length;o>i;++i)n.call(e,t[i],i,t)&&r.push(t[i]);return r},reject:function(t,n,e){for(var r=[],i=0,o=t.length;o>i;++i)n.call(e,t[i],i,t)||r.push(t[i]);return r},reduce:function(t,n,e){for(var r=arguments.length,i=3===r?e:t[0],o=t.length,s=3===r?0:1;o>s;++s)i=n.call(null,i,t[s],s,t);return i},reduceRight:function(t,n,e){for(var r=arguments.length,i=t.length-1,o=3===r?e:t[i],s=3===r?i:i-1;s>=0;--s)o=n.call(null,o,t[s],s,t);return o},find:function(t,n,e){for(var i=0,o=t.length;o>i;++i)if(n.call(e,t[i],i,t))return t[i];return r},partition:function(t,n){for(var e=[],r=[],i=0,o=t.length;o>i;++i)n.call(null,t[i],i,t)?e.push(t[i]):r.push(t[i]);return[e,r]},memoize:function(t,n){var e=function(r){var o=e.cache,s=n?n.apply(this,arguments):r;return i.has(o,s)||(o[s]=t.apply(this,arguments)),o[s]};return e.cache={},e},indexBy:c(function(t,n,e){t[e]=n}),groupBy:c(function(t,n,e){(t[e]=t[e]||[]).push(n)}),countBy:c(function(t,n,e){t[e]=(t[e]||0)+1})}}();e.forEach(["noop","identity","forEach","isUndefined","isFunction","isObject","isArray","isNumber","isDate","isElement","isString"],function(t){i[t]=e[t]}),i.clone=e.copy;var o,s,a=e.element,u=e.module("waffle",[]);u.run(["$injector","$log","$filter",function(t,n,e){o=t.get("$parse");try{s=t.get("$sanitize")}catch(r){n.warn("Module ngSanitize is not available, you should add this module to avoid xss injection"),s=i.identity}var a=C.$get;C.$get=function(t){return a(t)||e(t)}}]);var h="waffle-",c=h+"sortable",l=c+"-asc",f=c+"-desc",d=h+"fixedheader",$="data-waffle-",p=$+"id",v=$+"sortable",g=$+"order",y="+",m="-",b=function(){var t="key_",n=function(n){return t+n},e=function(){return this instanceof e?void(this.$o={}):new e};return e.prototype={clear:function(){this.$o={}},put:function(t,e){return this.$o[n(t)]=e,this},get:function(t){return this.$o[n(t)]},remove:function(t){return delete this.$o[n(t)],this},contains:function(t){return i.has(this.$o,n(t))}},e}(),w=function(){var t=function(){var t=n.createElement("div");t.style.width="100px",t.style.height="100px",t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",n.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return n.body.removeChild(t),e},e=function(){return"body"},r={create:function(t){return n.createElement(t)},byId:function(t){var e=n.getElementById(t);return e?[e]:[]},byTagName:function(t,e){return(e||n).getElementsByTagName(t)},createFragment:function(){return n.createDocumentFragment()},scrollbarWidth:i.memoize(t,e)};return i.forEach(["tr","td","th","tbody","thead"],function(t){r[t]=function(){return this.create(t)}}),r}(),x={toPx:function(t){return i.isNumber(t)?t+"px":t},fromPx:function(t){return i.isString(t)?Number(t.replace("px","")):t}},B=function(){var t=Array.prototype,n=function(){try{var n={};return n[0]=1,!!t.toString.call(n)}catch(e){return!1}}(),e=function(e){return function(){var r=n?this:i.toArray(this);return t[e].apply(r,arguments)}},s=function(t,n,r){return e(t).apply(n,r)},a=function(t,n){this.$$map=new b;var e=n||{};this.$$key=e.key||"id",this.$$model=e.model||Object,i.isFunction(this.$$key)||(this.$$key=o(this.$$key)),this.$$observers=[],this.$$changes=[],this.length=0,t&&t.length&&this.push.apply(this,t)},u=function(t){return parseInt(Number(t)||0,10)},h="splice",c="update",l=function(t,n,e,r,i){return{type:t,removed:n,index:e,addedCount:r,object:i}},f=function(t,n){delete t[n]},d=function(t,n){t.$$map.remove(n)},$=function(t,n){var e=t.$$key(n),r=t.$$map.get(e);null!=r&&(f(t,r),d(t,e))},p=function(t,n){if(!i.isObject(n))throw new Error("Waffle collections are not array, only object are allowed");return n instanceof t.$$model?n:new t.$$model(n)},v=function(t,n,e){t[e]=n,null!=n&&t.$$map.put(t.$$key(n),e)},g=function(t,n,e){var r=t.at(e),i=t.at(n);v(t,i,e),v(t,r,n)},y=function(t,n,e){for(var r=Math.abs(e),i=t.length-1;i>=n;--i)g(t,i,i+r);t.length+=r},m=function(t,n,e){for(var r=Math.abs(e),i=t.length,o=i-r,s=n+r,a=[],u=s;i>u;++u)g(t,u,u-r);for(var h=o;i>h;++h){var c=t.at(h);a.unshift(c),$(t,c)}return t.length=o,a},w=function(t,n){for(var e,r=t.$$sortFn,o=t.length,s=n.length,a=o+s,u=[],c=o-1,f=s-1,d=a-1;d>=0;--d)if(0>c||r(t[c],n[f])<0){if(v(t,n[f--],d),e=i.first(u),e&&e.index===d+1?(e.index=d,e.addedCount++):(e=l(h,[],d,1,t),u.unshift(e)),0>f)break}else v(t,t[c--],d);return t.length=a,u},x=function(t){t.callback.call(t.ctx,this.$$changes)};return a.prototype={at:function(t){return this[t]},byKey:function(t){var n=this.indexByKey(t);return n>=0?this.at(n):r},indexByKey:function(t){return this.$$map.contains(t)?this.$$map.get(t):-1},findIndex:function(t,n){for(var e=0,r=this.length;r>e;++e)if(t.call(n,this.at(e),e,this))return e;return-1},add:function(t,n){var e=[t,0].concat(n);return this.splice.apply(this,e),this.length},remove:function(t,n){return this.splice.call(this,t,n)},push:function(){return this.add.call(this,this.length,i.toArray(arguments))},unshift:function(){return this.add.call(this,0,i.toArray(arguments))},pop:function(){return this.remove(this.length-1,1)[0]},shift:function(){return this.remove(0,1)[0]},clear:function(){if(this.length>0){for(var t=[],n=0,e=this.length;e>n;++n)t[n]=this.at(n),f(this,n);this.$$map.clear(),this.length=0,this.trigger(l(h,t,0,0,this))}return this},reset:function(t){var n=this.length,e=t.length,r=this.$$sortFn;r&&t.sort(r),this.$$map.clear();for(var i=[],o=t.length,s=0;e>s;++s)n>s&&i.push(this.at(s)),v(this,p(this,t[s]),s);for(;n>s;++s)i.push(this.at(s)),f(this,s);return this.length=e,this.trigger([l(h,i,0,o,this)]),this},isEmpty:function(){return 0===this.length},concat:function(){var n=t.concat.apply(this.toArray(),arguments);return new a(n,{key:this.$$key,model:this.$$model})},slice:function(){var t=s("slice",this,arguments);return new a(t,{key:this.$$key,model:this.$$model})},splice:function(t,n){var e=this.$$sortFn,r=this.length,o=i.rest(arguments,2),s=function(t){return p(this,t)},a=i.map(o,s,this),c=a.length,f=u(t);f=f>=0?Math.min(r,f):Math.max(r+f,0);var d=Math.min(Math.max(u(n)||0,0),r-f),$=[];if(d>0){for(var g=0;d>g;++g)$.push(this[g+f]);m(this,f,d)}var b;if(c>0)if(e)a.sort(e),b=w(this,a);else{y(this,f,c);for(var x=0;c>x;++x)v(this,a[x],f+x);b=[l(h,$,f,c,this)]}else b=[];if($.length>0){var B=i.find(b,function(t){return t.index===f});B?B.removed=$:b.unshift(l(h,$,f,0,this))}return b&&b.length>0&&this.trigger(b),$},reverse:function(){if(this.$$sortFn)return this;for(var t=this.length,n=Math.floor(t/2),e=[],r=[],i=0,o=t-1;n>i;++i,--o)g(this,i,o),e.push(l(c,[],i,0,this)),r.unshift(l(c,[],o,0,this));var s=e.concat(r);return s.length&&this.trigger(s),this},split:function(t){for(var n=t||20,e=[],r=[],i=0,o=this.length;o>i;++i)r.push(this.at(i)),r.length===n&&(e.push(r),r=[]);return r.length>0&&e.push(r),e},toJSON:function(){return JSON.stringify(this.toArray())},sort:function(t){return this.$$sortFn=t,this.reset(this.toArray()).clearChanges()},pluck:function(t){return this.map(o(t))},observe:function(t,n){return this.$$observers.push({ctx:n||null,callback:t}),this},unobserve:function(t,n){if(0===arguments.length)this.$$observers=[];else{var e=n||null;this.$$observers=i.reject(this.$$observers,function(n){return n.ctx===e&&t===n.callback})}return this},trigger:function(t){this.$$changes=this.$$changes.concat(t);var n=this;return setTimeout(function(){n.$$changes.length>0&&(i.forEach(n.$$observers,x,n),n.$$changes=[]),n=null}),this},clearChanges:function(){return this.$$changes=[],this}},i.forEach(["indexOf","size","lastIndexOf","first","last","initial","rest","partition","forEach","map","every","some","reduce","reduceRight","filter","reject","find","toArray"],function(t){i[t]&&(a.prototype[t]=function(){var n=[this].concat(i.toArray(arguments));return i[t].apply(i,n)})}),i.forEach(["countBy","groupBy","indexBy"],function(t){a.prototype[t]=function(n,e){return i.isString(n)&&(n=o(n)),i[t].call(i,this,n,e)}}),i.forEach(["toString","toLocaleString","join"],function(t){a.prototype[t]=e(t)}),a}(),C=function(){var t=function(t){return(null==t?"":t).toString()},n={$identity:i.identity,$empty:function(){return""},$lowercase:function(n){return t(n).toLowerCase()},$uppercase:function(n){return t(n).toUpperCase()},$capitalize:function(n){var e=t(n);return e.charAt(0).toUpperCase()+e.slice(1)},$get:function(t){return n[t]}};return n}(),k={$string:function(t,n){var e=null==t?"":String(t),r=null==n?"":String(n);return e.localeCompare(r)},$number:function(t,n){var e=null==t?0:Number(t),r=null==n?0:Number(n);return e-r},$boolean:function(t,n){var e="false"===t?0:Boolean(t)?1:0,r="false"===n?0:Boolean(n)?1:0;return e-r},$date:function(t,n){var e=new Date(null==t?0:t).getTime(),r=new Date(null==n?0:n).getTime();return e-r},$auto:function(t,n){if(t===n||null==t&&null==n)return 0;var e=i.find(["Number","Boolean","Date","String"],function(e){var r=i["is"+e];return r(t)||r(n)});return e?k["$"+e.toLowerCase()](t,n):n>t?-1:1},$get:function(t){return k[t]}},A=function(t){return i.isArray(t)||(t=[t]),function(n,e){if(n===e||null==n&&null==e)return 0;for(var r=0,i=t.length;i>r;++r){var o=t[r],s=o.parser(n),a=o.parser(e),u=o.fn.call(k,s,a);if(u)return o.desc?-1*u:u}return 0}},E=function(){var t=i.isUndefined,n="$identity",e="$auto",r=x.fromPx,a=x.toPx,u=function(t,n,e){return i.isString(t)&&(t=n.$get(t)),i.isFunction(t)||(t=n.$get(e)),t},h=function(a){var h=a.escape,c=a.sortable;this.id=a.id,this.title=a.title||"",this.field=a.field||this.id,this.css=a.css||this.id,this.escape=t(h)?!0:!!h,this.width=r(a.width),this.sortable=t(c)?!0:!!c,this.asc=t(a.asc)?null:!!a.asc,h&&(this.title=s(this.title));var l=a.renderer||n,f=i.isArray(l)?l:[l];this.$renderer=i.map(f,function(t){return u(t,C,n)}),this.$comparator=u(a.comparator,k,e),this.$parser=o(this.field)};return h.prototype={cssClasses:function(){var t=[this.css];this.sortable&&t.push(c);var n=this.asc;return null!=n&&t.push(n?l:f),t.join(" ")},attributes:function(t,n){var e={};if(e[p]=this.id,n&&this.sortable){e[v]=!0;var r=this.asc;null!=r&&(e[g]=r?y:m)}return e},styles:function(){var t={},n=a(this.width);return n&&(t.width=n,t.maxWidth=n,t.minWidth=n),t},updateWidth:function(t){return this.width=r(t),this},render:function(t){var n=this.field,e=null==t?"":this.$parser(t),r=i.reduce(this.$renderer,function(e,r){return r.call(C,e,t,n)},e);return null==r?"":this.escape?s(r):r}},h}(),j=function(){var t=x.toPx,n=x.fromPx,e=function(t){var n=t||[];return i.isArray(n)||(n=[n]),i.map(n,function(t){var n=t.charAt(0);return n!==y&&n!==m?y+t:t})},r=function(t,n,e){var r=t.options.events[n];return r!==i.noop&&r.apply(t,(e||i.noop).call(t)),t},s=function(t){var n=t.$table[0];if(t.$tbody=a(w.byTagName("tbody",n)),t.$thead=a(w.byTagName("thead",n)),!t.$thead.length){var e=w.thead();t.$thead=a(e),t.$table.append(e)}if(!t.$tbody.length){var r=w.tbody();t.$tbody=a(r),t.$table.append(r)}return t},u=function(t,n){var e=w.tr();return t.$columns.forEach(function(t,r){var i=a(w.td()).addClass(t.cssClasses(r,!1)).css(t.styles(r,!1)).attr(t.attributes(r,!1)).html(t.render(n));e.appendChild(i[0])}),e},h=function(t,e){if(!(this instanceof h))return new h(t,e);i.defaults(e.events||{},h.options.events),this.options=i.defaults(e||{},h.options),this.$table=a(t),this.$data=new B(e.data||[],{key:e.key}),this.$columns=new B(e.columns||[],{key:"id",model:E});var o=e.size;this.options.size={width:n(o.width),height:n(o.height)},this.$sortBy=[],s(this),this.$$bind().$$observe().assignWidth().renderHeader().sortBy(e.sortBy,!1).renderBody(),r(this,"onInitialized")};return h.create=function(t,n){return new h(t,n)},h.prototype={data:function(){return this.$data},columns:function(){return this.$columns},render:function(){return this.renderHeader().renderBody()},assignWidth:function(){var n=this.options.size,e=n.width;if(n.height){var r=t(n.width);this.$table.addClass(d).css({width:r,maxWidth:r,minWidth:r}),this.$tbody.css({maxHeight:t(n.height)}),e-=w.scrollbarWidth()}var i=0,o=0;this.$columns.forEach(function(t){var n=t.width;n&&(i+=n,++o)});var s=this.$columns.length,a=s-o,u=0,h=0;if(a){var c=(e-i)/a;u=Math.floor(c),h=c-u}var l=0;return this.$columns.forEach(function(t){var n=t.width,e=n||0;e||(l+=h,l>=1?(e=u+1,l--):e=u),e!==n&&t.updateWidth(e)}),this},renderHeader:function(){var t=w.tr();return this.$columns.forEach(function(n,e,r){var i=a(w.th()).addClass(n.cssClasses(e,!0)).css(n.styles(e,!0)).attr(n.attributes(e,r,!0)).html(n.title);t.appendChild(i[0])}),this.$thead.empty().append(t),this},renderBody:function(t){var n=null==t?this.options.async:t,e=this,o=function(t,n){for(var e=w.createFragment(),r=0,i=n.length;i>r;++r){var o=u(t,n[r]);e.appendChild(o)}return e},s=function(t){t.$data.clearChanges(),r(t,"onRendered",function(){return[this.$data,i.toArray(this.$tbody[0].childNodes)]}),t=o=s=null};if(n){var a=10,h=this.$data.split(200),c=function(){if(h.length>0){var t=o(e,h.shift());e.$tbody.append(t),setTimeout(c,a)}else s(e),c=h=null};this.$tbody.empty(),setTimeout(c)}else{var l=o(e,e.data());e.$tbody.empty().append(l),s(e)}return this},sortBy:function(t,n){var s=e(t);if(this.$sortBy===s||this.$sortBy.join()===s.join())return this;this.$sortBy=s;var a=this.$thead.children().eq(0),u=a.children();u.removeClass(l+" "+f).removeAttr(g);var h=this.$columns,c=i.map(this.$sortBy,function(t){var n,e=t.charAt(0),r=t.substr(1),i=e===y,s=h.indexByKey(r);return s>=0?(n=h.at(s),n.asc=i,u.eq(s).addClass(i?l:f).attr(g,e)):n={},{parser:n.$parser||o(t),fn:n.$comparator||k.$auto,desc:!i}});return this.$data.sort(A(c)),n!==!1&&this.renderBody(),r(this,"onSorted")},destroy:function(){return this.$$unbind().$$unobserve().$$destroy()},$$destroy:function(){for(var t in this)this.hasOwnProperty(t)&&(this[t]=null);return this},$$bind:function(){var t=this;return this.$thead.on("click",function(n){var e=n.target;if(e.getAttribute(v)){var r,i=e.getAttribute(p),o=e.getAttribute(g)||m,s=o===y?m:y,a=s+i;if(n.shiftKey){r=t.$sortBy.slice();var u=o+i,h=r.indexOf(u);h>=0&&r.splice(h,1),r.push(a)}else r=[a];t.sortBy(r)}}),this},$$unbind:function(){return this.$thead.off(),this},$$observe:function(){return this.$data.observe(this.$$onDataChange,this),this},$$unobserve:function(){return this.$data.unobserve(),this},$$onDataChange:function(t){return i.forEach(t,function(t){var n=t.type,e="$$on_"+n;this[e](t)},this),this},$$on_splice:function(t){var n=t.index,e=t.addedCount,o=t.object,s=t.removed.length;if(s>0){var a;if(0===n&&s===this.$tbody[0].childNodes.length)a=i.toArray(this.$tbody[0].childNodes),this.$tbody.empty();else{a=[];for(var h=0;s>h;++h){var c=h+n,l=this.$tbody.children().eq(c);a.push(l[0]),l.remove()}}r(this,"onRemoved",function(){return[t.removed,a,n]})}if(e>0){for(var f=w.createFragment(),d=[],$=[],p=0;e>p;++p){var v=p+n,g=o.at(v),y=u(this,g);$.push(y),d.push(g),f.appendChild(y)}n>0?this.$tbody.children().eq(n-1).after(f):this.$tbody.prepend(f),r(this,"onAdded",function(){return[d,$,n]})}return this},$$on_update:function(t){var n=t.index,e=this.$data.at(n),r=this.$tbody[0],i=r.childNodes[n],o=u(this,e);return r.replaceChild(o,i),this}},h.options={key:"id",async:!1,size:{width:null,height:null},events:{}},i.forEach(["onInitialized","onRendered","onAdded","onRemoved","onSorted"],function(t){h.options.events[t]=i.noop}),h}(),N={Grid:j,addRenderer:function(t,n){return C[t]=n,N},addComparator:function(t,n){return k[t]=n,N}};u.provider("Waffle",function(){this.$get=function(){return N},i.forEach(i.keys(N),function(t){this[t]=N[t]},this)}),u.directive("waffle",["$parse",function(t){return{restrict:"AE",replace:!1,template:"<table><thead></thead><tbody></tbody></table>",link:function(n,e,r){var o=e;"table"!==o[0].tagName.toLowerCase()&&(o=o.children().eq(0));var s=function(){var e=r.waffleOptions||r.waffleGrid;return t(e)(n)||{}}(),a=t(r.waffleGrid).assign||i.noop,u=s.events=s.events||{};i.forEach(i.keys(j.options.events),function(t){if(r[t]){var e=u[t];u[t]=function(){e!==i.noop&&i.isFunction(e)&&e.apply(this,arguments),n.$eval(r[t])}}});var h=j.create(o,s);a(n,h),n.$on("$destroy",function(){h.destroy(),h=s=a=o=null})}}}])}(window,document,window.angular,void 0);